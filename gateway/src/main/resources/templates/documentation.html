<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Documentaci√≥n - TFG Darquier Tom√°s</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}">
    <link rel="stylesheet" th:href="@{/css/documentation.css}">
</head>
<body>
<header>
    <nav>
        <a href="/" class="home-icon">üè†</a>
        <button class="active">Documentaci√≥n</button>
        <button onclick="window.location.href='/guide'">Gu√≠a de Uso</button>
        <button onclick="window.location.href='/profile'">Perfil</button>
        <button class="logout">Cerrar Sesi√≥n</button>
    </nav>
</header>

<div class="doc-container">
    <aside class="doc-sidebar">
        <div class="components-nav">
            <style>
                /* Elimina el estilo de los enlaces dentro de las listas */
                ul li a {
                    text-decoration: none; /* Elimina el subrayado */
                    color: inherit;        /* Hereda el color del texto padre (como el color del li o del body) */
                }
            </style>
            <h2>Infraestructura</h2>
            <ul style="margin-top: 20px; margin-left: 10px;">
                <li><a href="#gateway-composicion" >‚óè  API Gateway</a></li>
            </ul>
            <ul style="margin-top: 20px; margin-left: 10px;">
                <li><a href="#discovery-composicion">‚óè  Discovery Server</a></li>
            </ul>
            <ul style="margin-top: 20px; margin-left: 10px;">
                <li><a href="#configuration-composicion">‚óè  Configuration Server</a></li>
            </ul>
            <ul style="margin-top: 20px; margin-left: 10px;">
                <li><a href="#jwt-composicion">‚óè  Json Web Token</a></li>
            </ul>
            <ul style="margin-top: 20px; margin-bottom: 30px; margin-left: 10px;">
                <li><a href="#docker-composicion">‚óè  Persistencia via Docker</a></li>
            </ul>
            <h2>Componentes</h2>
            <ul>
                <li class="expandable">
                    <span>Usuarios</span>
                    <ul>
                        <li><a href="#usuarios-composicion">Composici√≥n</a></li>
                        <li><a href="#usuarios-persistencia">Persistencia</a></li>
                        <li><a href="#usuarios-compatibilidad">Compatibilidad</a></li>
                    </ul>
                </li>
                <li class="expandable">
                    <span>Carrito</span>
                    <ul>
                        <li><a href="#carrito-composicion">Composici√≥n</a></li>
                        <li><a href="#carrito-persistencia">Persistencia</a></li>
                        <li><a href="#carrito-compatibilidad">Compatibilidad</a></li>
                    </ul>
                </li>
                <li class="expandable">
                    <span>√ìrdenes</span>
                    <ul>
                        <li><a href="#ordenes-composicion">Composici√≥n</a></li>
                        <li><a href="#ordenes-persistencia">Persistencia</a></li>
                        <li><a href="#ordenes-compatibilidad">Compatibilidad</a></li>
                    </ul>
                </li>
                <li class="expandable">
                    <span>Productos</span>
                    <ul>
                        <li><a href="#productos-composicion">Composici√≥n</a></li>
                        <li><a href="#productos-persistencia">Persistencia</a></li>
                        <li><a href="#productos-compatibilidad">Compatibilidad</a></li>
                    </ul>
                </li>
                <li class="expandable">
                    <span>Env√≠os</span>
                    <ul>
                        <li><a href="#envios-composicion">Composici√≥n</a></li>
                        <li><a href="#envios-persistencia">Persistencia</a></li>
                        <li><a href="#envios-compatibilidad">Compatibilidad</a></li>
                    </ul>
                </li>
                <li class="expandable">
                    <span>Notificaciones</span>
                    <ul>
                        <li><a href="#notificaciones-composicion">Composici√≥n</a></li>
                        <li><a href="#notificaciones-persistencia">Persistencia</a></li>
                        <li><a href="#notificaciones-compatibilidad">Compatibilidad</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </aside>
    <main class="doc-content">
        <div class="doc-header">
            <h1>Documentaci√≥n</h1>
            <div class="search-bar">
                <input type="text" placeholder="Buscar en la documentaci√≥n...">
            </div>
        </div>

        <article class="doc-article">
            <section id="gateway">
                <h2>API Gateway</h2>
                <div id="gateway-composicion" class="subsection">
                    <p>La opcion disponible en el canvas permite implementar en la arquitectura un API Gateway mediante Spring Cloud Gateway. Se trata de un componente que act√∫a como punto de entrada √∫nico para las solicitudes externas, redirigi√©ndolas a los servicios adecuados. Este patr√≥n centraliza funciones como la autenticaci√≥n, el enrutamiento, la agregaci√≥n de respuestas y el manejo de fallos. En lugar de que los clientes se comuniquen directamente con cada microservicio, todas las solicitudes pasan por el API Gateway, simplificando la gesti√≥n de tr√°fico y mejorando la seguridad. A su vez, todos los componentes dentro del canvas se adaptan a la presencia del Gateway e inscriben sus rutas en la configuracion del mismo.</p>
                    <div class="tech-icon">
                        <img src="/images/gateway-icon.png" alt="API Gateway">
                    </div>
                </div>
            </section>
            <section id="discovery">
                <h2>Discovery Server</h2>
                <div id="discovery-composicion" class="subsection">
                    <p>Un Discovery Server en una arquitectura de microservicios con Spring es un componente que gestiona y facilita la localizaci√≥n din√°mica de los servicios dentro de la infraestructura. Permite que los microservicios se registren y se descubran autom√°ticamente sin necesidad de configuraciones manuales de direcciones IP o puertos. Al activar la opcion presente en el canvas, la arquitectura es nutrida por un Eureka Discovery Server, transformando a los servicios presentes en el canvas, por ende, en clientes Eureka con su correspondiente dependencia para permitir un registro y descubrimiento exitoso.</p>
                    <div class="tech-icon">
                        <img src="/images/discovery-icon.png" alt="Discovery Server">
                    </div>
                </div>
            </section>
            <section id="configuration">
                <h2>Configuration Server</h2>
                <div id="configuration-composicion" class="subsection">
                    <p>Mediante la utilizacion de un Configuration Server, los componentes adquieren la posiblidad de obtener su configuraci√≥n de forma externa, evitando la necesidad de manejarla localmente en cada servicio. Al activar la opcion correspondiente, la arquitectura incluira el componente mencionado, implementado mediante Spring Cloud Config. El Discovery Server y el Configuration Server trabajan juntos, es por esto que para activarlo es excluyente que el recien mencionado Discovery Server este activado tambien.</p>
                    <div class="tech-icon">
                        <img src="/images/config-icon.png" alt="Configuration Server">
                    </div>
                </div>
            </section>
            <section id="jwt">
                <h2>Json Web Token</h2>
                <div id="jwt-composicion" class="subsection">
                    <p>JWT (JSON Web Token) se trata un mecanismo, basado en un 'token', para manejar autenticaci√≥n y autorizaci√≥n en microservicios. El token, que contiene informaci√≥n sobre el usuario, se emite tras la autenticaci√≥n y se incluye en cada solicitud. En Spring, y por consecuencia al activar la opcion correspondiente en el canvas, se usa con Spring Security para validar el token en el API Gateway y/o en los microservicios, garantizando acceso seguro sin necesidad de mantener sesiones.</p>
                    <div class="tech-icon">
                        <img src="/images/spring-security-icon.png" alt="Spring Security">
                    </div>
                </div>
            </section>
            <section id="docker">
                <h2>Persistencia via Docker</h2>
                <div id="docker-composicion" class="subsection">
                    <p>Cada compontente generado en el canvas, incluye segun la eleccion realizada al momento de la personalizacion, un archivo Docker, para desplegar una instancia funcional del metodo de persistencia seleccionado, con conexiones preestablecidas debido a las configuraciones presentes tanto en las propiedades del componente Spring, como en las propias del contenedor</p>
                    <div class="tech-icon">
                        <img src="/images/docker-icon.png" alt="Docker">
                    </div>
                </div>
            </section>
            <section id="usuarios">
                <h2>Componente de Usuarios</h2>
                <div id="usuarios-composicion" class="subsection">
                    <h3>Composici√≥n</h3>
                    <p>El componente de usuarios gestiona las distintas acciones realizables sobre de los usuarios en el sistema. En su version vanilla ofrece funcionalidades CRUD basicas con notoria capacidad de validacion de datos y resistencia a errores.</p>
                    <ul>
                        <li><strong>GET .../dto/{userId}</strong> ‚Üí Obtiene informaci√≥n resumida del usuario.</li>
                        <li><strong>GET .../{userId}</strong> ‚Üí Retorna el usuario completo seg√∫n su ID.</li>
                        <li><strong>POST .../</strong> ‚Üí Crea un nuevo usuario.</li>
                        <li><strong>PUT .../</strong> ‚Üí Actualiza los datos de un usuario existente.</li>
                        <li><strong>DELETE .../</strong> ‚Üí Elimina un usuario (requiere validaci√≥n de contrase√±a).</li>
                    </ul>
                </div>
                <div id="usuarios-persistencia" class="subsection">
                    <h3>Persistencia</h3>
                    <p>Los datos de usuarios se almacenan en una base de datos relacional, ya sea PostgreSQL o MySQL. Se utiliza JPA/Hibernate para el mapeo objeto-relacional. La estructura incluye tablas para informaci√≥n b√°sica, roles y permisos.</p>
                    <div class="tech-icon">
                        <img src="/images/postgresql-icon.png" alt="PostgreSQL">
                        <img src="/images/mysql-icon.png" alt="MySQL">
                    </div>
                </div>
                <div id="usuarios-compatibilidad" class="subsection">
                    <h3>Compatibilidad</h3>
                    <p>Este componente es compatible con todos los microservicios del sistema a excepcion de Productos. Se integra especialmente con el sistema de notificaciones para alertas personalizadas. Otra union destacable se produce con el componente de √≥rdenes para la gesti√≥n de compras.</p>
                    <p>Aun asi, el servicio posee la particularidad de que su conectividad con servicios externos no comprende nuevas funcionalidades y/o endpoints, debido a que implicaria renunciar al principio de responsabilidad unica, pero si permite anclar funcionalidades de servicios ajenos a usuarios en especifico.</p>
                    <p>Act√∫a como proveedor de informacion en todas sus interacciones</p>
                    <div>
                        <p style="font-size: 32px; margin-top: 20px;">üõí üìã üîî üö¢</p>
                    </div>
                </div>
            </section>

            <section id="carrito">
                <h2>Componente de Carrito</h2>
                <div id="carrito-composicion" class="subsection">
                    <h3>Composici√≥n</h3>
                    <p>Gestiona el carrito de compras temporal de cada usuario. Implementa funcionalidades de agregar/eliminar productos, actualizar cantidades y calcular totales en tiempo real.</p>
                    <ul>
                        <li><strong>POST .../{userId}/add</strong> ‚Üí Agrega un producto al carrito.</li>
                        <li><strong>GET .../{userId}/items</strong> ‚Üí Obtiene los productos en el carrito.</li>
                        <li><strong>DELETE .../{userId}/remove</strong> ‚Üí Elimina un producto del carrito.</li>
                        <li><strong>DELETE .../{userId}/clear</strong> ‚Üí Vac√≠a el carrito.</li>
                    </ul>
                </div>
                <div id="carrito-persistencia" class="subsection">
                <div class="subsection">
                    <h3>Persistencia</h3>
                    <p>Utiliza Redis como almacenamiento en cach√© para mantener el estado del carrito. Los datos se persisten temporalmente y se sincronizan con el servicio de √≥rdenes al finalizar la compra.</p>
                    <div class="tech-icon">
                        <img src="/images/redis-icon.png" alt="Redis">
                    </div>
                </div>
                <div id="carrito-compatibilidad" class="subsection">
                <div class="subsection">
                    <h3>Compatibilidad</h3>
                    <p>Se integra con el cat√°logo de productos, el sistema de usuarios, el servicio de √≥rdenes para el proceso de checkout y de notificaciones, para notificar abandonos de carrito.</p>
                    <p>Act√∫a como proveedor de informacion para Ordenes, y como consumidor con Usuarios y Productos</p>
                    <div>
                        <p style="font-size: 32px; margin-top: 20px;">üë§ üìö üìã üîî</p>
                    </div>
                </div>
            </section>

            <section id="ordenes">
                <h2>Componente de √ìrdenes</h2>
                <div id="ordenes-composicion" class="subsection">
                <div class="subsection">
                    <h3>Composici√≥n</h3>
                    <p>Maneja el ciclo de vida completo de las √≥rdenes, desde su creaci√≥n hasta su finalizaci√≥n, mediante una potente gestion de estados. Se trata de un componente clave en la mayoria de arquitecturas con fines de lucro.</p>
                    <ul>
                        <li><strong>GET .../</strong> ‚Üí Obtiene todas las √≥rdenes.</li>
                        <li><strong>GET .../{id}</strong> ‚Üí Retorna una orden seg√∫n su ID.</li>
                        <li><strong>POST .../</strong> ‚Üí Crea una nueva orden.</li>
                        <li><strong>PUT .../</strong> ‚Üí Actualiza una orden existente.</li>
                        <li><strong>DELETE .../{id}</strong> ‚Üí Elimina una orden.</li>
                    </ul>
                </div>
                <div id="ordenes-persistencia" class="subsection">
                <div class="subsection">
                    <h3>Persistencia</h3>
                    <p>Los datos de las ordenes se almacenan en una base de datos relacional, ya sea PostgreSQL o MySQL. Se utiliza JPA/Hibernate para el mapeo objeto-relacional. La estructura incluye tablas para almacenar el historial de ordenes y sus estados.</p>
                    <div class="tech-icon">
                        <img src="/images/postgresql-icon.png" alt="PostgreSQL">
                        <img src="/images/mysql-icon.png" alt="MySQL">
                    </div>
                </div>
                <div id="ordenes-compatibilidad" class="subsection">
                <div class="subsection">
                    <h3>Compatibilidad</h3>
                    <p>Se comunica con los servicios de usuarios, carrito, env√≠os y notificaciones para coordinar el proceso completo de la orden.</p>
                    <p>Act√∫a como proveedor de informacion para Envios, y como consumidor con Usuarios y Carrito</p>
                    <div>
                        <p style="font-size: 32px; margin-top: 20px;">üë§ üõí üîî üö¢</p>
                    </div>
                </div>
            </section>

            <section id="productos">
                <h2>Componente de Productos</h2>
                <div id="productos-composicion" class="subsection">
                <div class="subsection">
                   <h3>Composici√≥n</h3>
                   <p>Maneja la persistencia, actualizacion y operaciones CRUD de los productos y sus precios y caracteristicas. Se trata de un componente estrictamente necesario para la gran mayoria de procesos.</p>
                    <ul>
                        <li><strong>GET .../</strong> ‚Üí Obtiene todos los productos.</li>
                        <li><strong>GET .../{id}</strong> ‚Üí Retorna un producto seg√∫n su ID.</li>
                        <li><strong>POST .../</strong> ‚Üí Crea un nuevo producto.</li>
                        <li><strong>PUT .../{id}</strong> ‚Üí Actualiza un producto existente.</li>
                        <li><strong>DELETE .../{id}</strong> ‚Üí Elimina un producto.</li>
                    </ul>
                </div>
                <div id="productos-persistencia" class="subsection">
                <div class="subsection">
                     <h3>Persistencia</h3>
                     <p>Los datos de los productos se almacenan en una base de datos relacional, ya sea PostgreSQL o MySQL. Se utiliza JPA/Hibernate para el mapeo objeto-relacional. La estructura incluye tablas para persistir las caracteristicas y estados de los productos.</p>
                     <div class="tech-icon">
                         <img src="/images/postgresql-icon.png" alt="PostgreSQL">
                         <img src="/images/mysql-icon.png" alt="MySQL">
                     </div>
                </div>
                <div id="productos-compatibilidad" class="subsection">
                <div class="subsection">
                     <h3>Compatibilidad</h3>
                     <p>Se comunica con los servicios de usuarios, carrito y notificaciones para nutrir de informacion y significado los procesos que de estos componentes emergen.</p>
                    <p>Act√∫a como proveedor de informacion para Carrito, y como consumidor con Usuarios</p>
                     <div>
                        <p style="font-size: 32px; margin-top: 20px;">üõí üë§ üîî</p>
                    </div>
                </div>
            </section>

            <section id="envios">
                <h2>Componente de Env√≠os</h2>
                <div id="envios-composicion" class="subsection">
                <div class="subsection">
                    <h3>Composici√≥n</h3>
                    <p>Gestiona la log√≠stica de env√≠os, fundamentando su funcionamiento en la administracion de estados de los mismos y las acciones consecuentes a realizar en conjunto con componentes externos.</p>
                    <ul>
                        <li><strong>GET .../</strong> ‚Üí Obtiene todos los env√≠os.</li>
                        <li><strong>GET .../{id}</strong> ‚Üí Retorna un env√≠o seg√∫n su ID.</li>
                        <li><strong>POST .../</strong> ‚Üí Crea un nuevo env√≠o.</li>
                        <li><strong>PUT .../</strong> ‚Üí Actualiza un env√≠o existente.</li>
                        <li><strong>DELETE .../{id}</strong> ‚Üí Elimina un env√≠o.</li>
                    </ul>
                </div>
                <div id="envios-persistencia" class="subsection">
                <div class="subsection">
                    <h3>Persistencia</h3>
                    <p>Los datos de los envios se almacenan en una base de datos relacional, ya sea PostgreSQL o MySQL. Se utiliza JPA/Hibernate para el mapeo objeto-relacional. La estructura incluye tablas para almacenar un registro hist√≥rico de todas las operaciones log√≠sticas.</p>
                    <p>Utiliza MySQL para almacenar informaci√≥n de env√≠os, rutas y estados de entrega. Mantiene un registro hist√≥rico de todas las operaciones log√≠sticas.</p>
                    <div class="tech-icon">
                        <img src="/images/postgresql-icon.png" alt="PostgreSQL">
                        <img src="/images/mysql-icon.png" alt="MySQL">
                    </div>
                </div>
                <div id="envios-compatibilidad" class="subsection">
                <div class="subsection">
                    <h3>Compatibilidad</h3>
                    <p>Se integra con el sistema de usuarios, √≥rdenes y notificaciones para mantener actualizados a los usuarios sobre el estado de sus env√≠os.</p>
                    <p>Act√∫a como consumidor con Usuarios y Ordenes</p>
                    <div>
                        <p style="font-size: 32px; margin-top: 20px;">üë§ üìã üîî </p>
                    </div>
                </div>
            </section>

            <section id="notificaciones">
                <h2>Componente de Notificaciones</h2>
                <div id="notificaciones-composicion" class="subsection">
                <div class="subsection">
                    <h3>Composici√≥n</h3>
                    <p>Sistema centralizado de notificaciones con soporte destacable en canales de email. Posee una estructura generica con alta adaptabilidad para multiples casos de uso</p>
                    <p>
                      El microservicio est√° configurado para escuchar eventos de WebSocket a trav√©s de la ruta /ws, utilizando el protocolo STOMP. Cuando una notificaci√≥n es consumida, se env√≠a a todos los suscriptores en el canal /topic/notification/{id}, donde {id} corresponde al ID √∫nico de la notificaci√≥n. Esto asegura que los clientes reciban las actualizaciones en tiempo real de manera eficiente, permitiendo una experiencia interactiva y fluida.
                    </p>
                </div>
                <div id="notificaciones-persistencia" class="subsection">
                <div class="subsection">
                    <h3>Persistencia</h3>
                    <p>Implementa ApacheKafka para la gesti√≥n de colas de mensajes.</p>
                    <div class="tech-icon">
                        <img src="/images/kafka-icon.png" alt="ApacheKafka">
                    </div>
                </div>
                <div id="notificaciones-compatibilidad" class="subsection">
                    <h3>Compatibilidad</h3>
                    <p>Compatible con todos los componentes del sistema, ya que se trata de una pieza clave de comunicacion para la correcta implementacion de cualquier logica de negocio.</p>
                    <div>
                        <p style="font-size: 32px; margin-top: 20px;">üë§ üõí üìö üìã üö¢</p>
                    </div>
                </div>
            </section>
        </article>
    </main>
</div>

<div id="logoutModal" class="modal">
    <div class="modal-content">
        <h2>Confirmar Cierre de Sesi√≥n</h2>
        <p>¬øEst√° seguro que desea cerrar la sesi√≥n?</p>
        <div class="modal-buttons">
            <form method="post" th:action="@{/logout}">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                <button id="confirmLogout" type="submit">Confirmar</button>
            </form>
            <button id="cancelLogout">Cancelar</button>
        </div>
    </div>
</div>
<script th:src="@{/js/documentation.js}"></script>
<script th:src="@{/js/logout.js}"></script>
</body>
</html>