<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Documentación - TFG Darquier Tomás</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}">
    <link rel="stylesheet" th:href="@{/css/documentation.css}">
</head>
<body>
<header>
    <nav>
        <a href="/" class="home-icon">🏠</a>
        <button class="active">Documentación</button>
        <button onclick="window.location.href='/guide'">Guía de Uso</button>
        <button onclick="window.location.href='/profile'">Perfil</button>
        <button class="logout">Cerrar Sesión</button>
    </nav>
</header>

<div class="doc-container">
    <aside class="doc-sidebar">
        <div class="components-nav">
            <h2>Componentes</h2>
            <ul>
                <li class="expandable">
                    <span>Usuarios</span>
                    <ul>
                        <li><a href="#usuarios-composicion">Composición</a></li>
                        <li><a href="#usuarios-persistencia">Persistencia</a></li>
                        <li><a href="#usuarios-compatibilidad">Compatibilidad</a></li>
                    </ul>
                </li>
                <li class="expandable">
                    <span>Carrito</span>
                    <ul>
                        <li><a href="#carrito-composicion">Composición</a></li>
                        <li><a href="#carrito-persistencia">Persistencia</a></li>
                        <li><a href="#carrito-compatibilidad">Compatibilidad</a></li>
                    </ul>
                </li>
                <li class="expandable">
                    <span>Órdenes</span>
                    <ul>
                        <li><a href="#ordenes-composicion">Composición</a></li>
                        <li><a href="#ordenes-persistencia">Persistencia</a></li>
                        <li><a href="#ordenes-compatibilidad">Compatibilidad</a></li>
                    </ul>
                </li>
                <li class="expandable">
                    <span>Envíos</span>
                    <ul>
                        <li><a href="#envios-composicion">Composición</a></li>
                        <li><a href="#envios-persistencia">Persistencia</a></li>
                        <li><a href="#envios-compatibilidad">Compatibilidad</a></li>
                    </ul>
                </li>
                <li class="expandable">
                    <span>Notificaciones</span>
                    <ul>
                        <li><a href="#notificaciones-composicion">Composición</a></li>
                        <li><a href="#notificaciones-persistencia">Persistencia</a></li>
                        <li><a href="#notificaciones-compatibilidad">Compatibilidad</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </aside>
    <main class="doc-content">
        <div class="doc-header">
            <h1>Documentación</h1>
            <div class="search-bar">
                <input type="text" placeholder="Buscar en la documentación...">
            </div>
        </div>

        <article class="doc-article">
            <section id="usuarios">
                <h2>Componente de Usuarios</h2>
                <div id="usuarios-composicion" class="subsection">
                    <h3>Composición</h3>
                    <p>El componente de usuarios gestiona la autenticación y autorización de los usuarios en el sistema. Implementa JWT para la seguridad y manejo de sesiones. Incluye funcionalidades como registro, inicio de sesión, recuperación de contraseña y gestión de perfiles.</p>
                    <div class="tech-icon">
                        <img src="/images/spring-security-icon.png" alt="Spring Security">
                    </div>
                </div>
                <div id="usuarios-persistencia" class="subsection">
                    <h3>Persistencia</h3>
                    <p>Los datos de usuarios se almacenan en una base de datos PostgreSQL. Se utiliza JPA/Hibernate para el mapeo objeto-relacional. La estructura incluye tablas para información básica, roles y permisos.</p>
                    <div class="tech-icon">
                        <img src="/images/postgresql-icon.png" alt="PostgreSQL">
                    </div>
                </div>
                <div id="usuarios-compatibilidad" class="subsection">
                    <h3>Compatibilidad</h3>
                    <p>Este componente es compatible con todos los demás microservicios del sistema. Se integra especialmente con el sistema de notificaciones para alertas de seguridad y el componente de órdenes para la gestión de compras.</p>
                </div>
            </section>

            <section id="carrito">
                <h2>Componente de Carrito</h2>
                <div id="carrito-composicion" class="subsection">
                    <h3>Composición</h3>
                    <p>Gestiona el carrito de compras temporal de cada usuario. Implementa funcionalidades de agregar/eliminar productos, actualizar cantidades y calcular totales en tiempo real.</p>
                    <div class="tech-icon">
                        <img src="/images/redis-icon.png" alt="Redis">
                    </div>
                </div>
                <div id="carrito-persistencia" class="subsection">
                <div class="subsection">
                    <h3>Persistencia</h3>
                    <p>Utiliza Redis como almacenamiento en caché para mantener el estado del carrito. Los datos se persisten temporalmente y se sincronizan con el servicio de órdenes al finalizar la compra.</p>
                </div>
                <div id="carrito-compatibilidad" class="subsection">
                <div class="subsection">
                    <h3>Compatibilidad</h3>
                    <p>Se integra con el catálogo de productos, el sistema de usuarios para la personalización, y el servicio de órdenes para el proceso de checkout.</p>
                </div>
            </section>

            <section id="ordenes">
                <h2>Componente de Órdenes</h2>
                <div id="ordenes-composicion" class="subsection">
                <div class="subsection">
                    <h3>Composición</h3>
                    <p>Maneja el ciclo de vida completo de las órdenes, desde su creación hasta su finalización. Incluye gestión de estados, validación de inventario y procesamiento de pagos.</p>
                </div>
                <div id="ordenes-persistencia" class="subsection">
                <div class="subsection">
                    <h3>Persistencia</h3>
                    <p>Implementa una base de datos MongoDB para almacenar el historial de órdenes y sus estados. Mantiene registros detallados de cada transacción y cambio de estado.</p>
                    <div class="tech-icon">
                        <img src="/images/mongodb-icon.png" alt="MongoDB">
                    </div>
                </div>
                <div id="ordenes-compatibilidad" class="subsection">
                <div class="subsection">
                    <h3>Compatibilidad</h3>
                    <p>Se comunica con los servicios de usuarios, envíos y notificaciones para coordinar el proceso completo de la orden.</p>
                </div>
            </section>

            <section id="envios">
                <h2>Componente de Envíos</h2>
                <div id="envios-composicion" class="subsection">
                <div class="subsection">
                    <h3>Composición</h3>
                    <p>Gestiona la logística de envíos, incluyendo cálculo de costos, seguimiento de paquetes y coordinación con servicios de mensajería externos.</p>
                </div>
                <div id="envios-persistencia" class="subsection">
                <div class="subsection">
                    <h3>Persistencia</h3>
                    <p>Utiliza MySQL para almacenar información de envíos, rutas y estados de entrega. Mantiene un registro histórico de todas las operaciones logísticas.</p>
                    <div class="tech-icon">
                        <img src="/images/mysql-icon.png" alt="MySQL">
                    </div>
                </div>
                <div id="envios-compatibilidad" class="subsection">
                <div class="subsection">
                    <h3>Compatibilidad</h3>
                    <p>Se integra con el sistema de órdenes y notificaciones para mantener actualizados a los usuarios sobre el estado de sus envíos.</p>
                </div>
            </section>

            <section id="notificaciones">
                <h2>Componente de Notificaciones</h2>
                <div id="notificaciones-composicion" class="subsection">
                <div class="subsection">
                    <h3>Composición</h3>
                    <p>Sistema centralizado de notificaciones que soporta múltiples canales: email, SMS, y notificaciones push. Gestiona templates y preferencias de usuario.</p>
                </div>
                <div id="notificaciones-persistencia" class="subsection">
                <div class="subsection">
                    <h3>Persistencia</h3>
                    <p>Implementa RabbitMQ para la gestión de colas de mensajes y MongoDB para almacenar históricos de notificaciones y templates.</p>
                    <div class="tech-icon">
                        <img src="/images/rabbitmq-icon.png" alt="RabbitMQ">
                    </div>
                </div>
                <div id="notificaciones-compatibilidad" class="subsection">
                    <h3>Compatibilidad</h3>
                    <p>Compatible con todos los componentes del sistema, actuando como servicio central de comunicación con los usuarios.</p>
                </div>
            </section>
        </article>
    </main>
</div>

<div id="logoutModal" class="modal">
    <div class="modal-content">
        <h2>Confirmar Cierre de Sesión</h2>
        <p>¿Está seguro que desea cerrar la sesión?</p>
        <div class="modal-buttons">
            <form method="post" th:action="@{/logout}">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                <button id="confirmLogout" type="submit">Confirmar</button>
            </form>
            <button id="cancelLogout">Cancelar</button>
        </div>
    </div>
</div>
<script th:src="@{/js/documentation.js}"></script>
<script th:src="@{/js/logout.js}"></script>
</body>
</html>